<!-- Collect tools from all posts -->
{%- assign tools = blank -%}
{%- for project in site.projects -%}
  {%- assign project_tools = project.tools | join:'|' | append:'|' -%}
  {%- if project_tools != '|' -%}
    {%- assign tools = tools | append:project_tools -%}
  {%- endif -%}
{%- endfor -%}
{%- assign tools = tools | split:'|' | uniq | sort -%}

<!-- List tools & related project projects -->
{% for tool in tools %}
<div class="py-3">
  {% assign icon_class=blank %}
  {% if tool == "Film" or tool == "Short Film" %}
    {% assign icon_class="fa fa-film" %}
  {% elsif tool == "Game" %}
    {% assign icon_class="fa fa-gamepad" %}
  {% endif %}
  <h4 id="{{ tool | slugify }}"><i class="{{icon_class}}" aria-hidden="true"></i> {{ tool }}</h4>
  <ul>
  {% for project in site.projects %}
    {%- if project.tools contains tool -%}
      {%- if project.external_url -%}
        {%- assign url = project.external_url -%}
      {%- else -%}
        {%- assign url = project.url | relative_url -%}
      {%- endif -%}
    <a href="{{ url }}"><li>{{ project.name }}</li></a>
    <br/>
    {%- endif -%}
  {% endfor %}
  </ul>
</div>
<hr class="bg-light">
{% endfor %}